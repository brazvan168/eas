<!DOCTYPE html>
<html lang="en">
  <head>
    <link href="style.css" type="text/css" rel="stylesheet" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Etch-A-Sketch</title>
  </head>
  <body>
    <div id="btn-container">
      <div>
        <button id="reset" class="buttons">Reset</button>
        <button id="random" class="buttons">Random Colors</button>
      </div>
    </div>
    <div id="container"></div>
    <script>
      "use strict";
      const container = document.querySelector("#container");
      const reset = document.querySelector("#reset");
      const div = document.createElement("div");
      const random = document.querySelector("#random");
      let state = "black";

      let currentNumber = 16;
      createGrid(16);

      function createGrid(number) {
        currentNumber = number;
        container.setAttribute(
          "style",
          `border:1px solid black;display:grid; grid-template-columns:repeat(${number},1fr); grid-template-rows:repeat(${number},1fr);width:500px;height:500px;margin:10px auto 0;`
        );

        div.classList.add("squares");
        div.setAttribute(
          "style",
          "border:1px solid red;width:100%;height:100%;"
        );
        for (let i = 0; i < number; i++) {
          for (let j = 0; j < number; j++)
            container.appendChild(div.cloneNode(true));
        }
        let squares = document.querySelectorAll(".squares");
        squares.forEach((square) => {
          square.addEventListener("mouseover", () => {
            if (state === "black") toBlack(square);
            else if (state === "random") toRandom(square);
          });
        });
      }

      function toBlack(elem) {
        elem.classList.add("black");
        state = "black";
      }
      function toRandom(elem) {
        elem.style.backgroundColor = getRandomColor(0, 255);
      }

      function getRandomColor(min, max) {
        let a = Math.floor(Math.random() * (max - min + 1)) + min;
        let b = Math.floor(Math.random() * (max - min + 1)) + min;
        let c = Math.floor(Math.random() * (max - min + 1)) + min;
        return `rgb(${a},${b},${c})`;
      }

      reset.addEventListener("click", () => {
        let gridNumber = prompt("Enter the number of squares:", 16);
        if (gridNumber != null) {
          state = "black";
          while (container.firstChild) {
            container.removeChild(container.firstChild);
          }
          createGrid(gridNumber);
        }
      });

      random.addEventListener("click", () => {
        state = "random";
        while (container.firstChild) {
          container.removeChild(container.firstChild);
        }
        createGrid(currentNumber);
      });
    </script>
  </body>
</html>
